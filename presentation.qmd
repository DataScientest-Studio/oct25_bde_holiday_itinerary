---
title: "Holiday Itinerary Project"
subtitle: "Presentation of Solutions, Data Organization, and Import"
format:
  revealjs:
    theme: default
    smaller: true
    slide-number: true
    header: "Holiday Itinerary Project"
    footer: "Data Architecture & Import"
---

## 1. What the Project Solves

- **Goal:** Provide a system for planning holiday itineraries in France.
- **Problem:** Efficiently managing and querying a large dataset of cities, roads, and diverse Points of Interest (POIs).
- **Solution:**
    - Uses a **Graph Database (Neo4j)** to represent spatial and relational data.
    - Implements **routing algorithms** (TSP, Dijkstra) via a FastAPI wrapper.
    - Connects various tourism data (restaurants, hotels, attractions) with a simulated road network.

---

## 2. Data Organization

### Cities & Roads

:::: {.columns .v-center}

::: {.column width="63%"}
- **City Nodes:** 627 French cities with population and location.
- **Relationships:**
  - `(City)-[:ROAD_TO]->(City)` with distance (km)
:::

::: {.column width="37%"}
![](img/city_road_to.png){fig-align="center"}
:::

::::

---

## 3. Data Organization

### POI & Types

:::: {.columns .v-center}

::: {.column width="63%"}
- **POI Nodes:** Tourism data from DATAtourisme.fr.
- **Type Nodes:** Separate nodes for POI categories (e.g., Restaurant, Hotel):  **Super-Node Pattern**
- **Relationships:**
  - `(POI)-[:IS_A]->(Type)`
  - `(POI)-[:IS_IN]->(City)` (Exact match)
  - `(POI)-[:IS_NEARBY]->(City)` (Closest city within 100km)
:::

::: {.column width="37%"}

![](img/super_node.png){width=120% fig-align="center"}
:::

::::

---

## 4. Spatial Coverage (City & POI)

:::: {.columns .v-center}

::: {.column width="48%"}
![](img/city_coverage.png){width=90% fig-align="center"}

:::

::: {.column width="48%"}
![](img/poi_coverage.png){width=90% fig-align="center"}

:::
::::
*Cities coverage (left) and POI coverage (right)*

---

## 5. How Data is Gained

#### Cities and Roads

:::: {.columns .v-center}

::: {.column width="63%"}
- **Source:** [simplemaps.com](https://simplemaps.com).
- **Road Network (Simulated):**
    - Created using **K-Nearest Neighbors (KNN)** (K=5).
    - **Weakly Connected Components (WCC)** used to identify disconnected clusters.
    - Manual "bridges" added to ensure the entire graph is a single connected component.
:::

::: {.column width="37%"}
![](img/cities_and_roads.png){width=90% fig-align="right"}
:::
::::

#### Points of Interest (POI)
- **Source:** [DATAtourisme.fr](https://www.datatourisme.fr/).
- **Volume:** ~1GB ZIP archive (unpacks to ~8GB JSON).

---

## 6. Data Import Pipeline

Orchestrated by **Apache Airflow** via **FastAPI** endpoints:

:::: {.columns .v-center}

::: {.column width="63%"}
1. **Trigger Download:** Fetches ZIP from DATAtourisme.
2. **Trigger Unzip:** Extracts data.
3. **Trigger Extract:** Processes JSON and generates Neo4j-compatible CSVs.
4. **Trigger Import:** Loads CSVs using `LOAD CSV` and `apoc.periodic.iterate`.
5. **Trigger Cleanup:** Removes temporary files and old versions.

Whole pipeline takes around 10 min to complete
:::

::: {.column width="37%"}
![](img/airflow_runs_detail.png){width=90% fig-align="right"}
:::
::::

---

## 7. Possible Improvemets

1. Better city coverage and road network.
2. Performance of import.
3. POI data source (web scraping necessary, no API exposed).

---

## Thank You!
## Any Questions?
